<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Agregar Producto - PMC Inventory</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f8;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #0072c6;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header nav a {
      color: white;
      margin-left: 20px;
      text-decoration: none;
      font-weight: bold;
    }

    header nav a:hover {
      text-decoration: underline;
    }

    h2 {
      color: #161515;
      text-align: center;
      margin: 20px 0;
      font-size: 24px;
      font-weight: bold;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      padding: 20px 30px 30px 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    form .row {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

    form .col-md-6, form .col-md-4 {
      box-sizing: border-box;
    }

    .col-md-6 {
      flex: 0 0 48%;
    }

    .col-md-4 {
      flex: 0 0 31%;
    }

    label {
      display: block;
      font-weight: 600;
      margin-bottom: 5px;
    }

    input[type="text"],
    input[type="number"],
    input[type="date"] {
      width: 100%;
      padding: 7px 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
    }

    .btn-group {
      margin-top: 25px;
      display: flex;
      justify-content: space-between;
    }

    .btn-primary {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }

    .btn-secondary {
      background-color: #6c757d;
      color: white;
      border: none;
      padding: 10px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn-secondary:hover {
      background-color: #5a6268;
      text-decoration: none;
      color: white;
    }

    @media (max-width: 600px) {
      .col-md-6, .col-md-4 {
        flex: 0 0 100%;
      }
    }
  </style>
</head>
<body>

<header>
  <div><strong>Menú</strong></div>
  <nav>
    <a href="/inventario">Inventario</a>
    <a href="/equipos">Equipos</a>
    <a href="/tarimas">Tarimas</a>
    <a href="/logout">Cerrar sesión</a>
  </nav>
</header>

<div class="container">
  <h2>Agregar Nuevo Producto</h2>

  <form method="POST">
    <div class="row">
      <div class="col-md-6">
        <label for="LOT">Lot</label>
        <input type="text" name="LOT" id="LOT" required />
      </div>

      <div class="col-md-6">
        <label for="list_number">List Number</label>
        <input type="text" name="list_number" id="list_number" required />
      </div>

      <div class="col-md-6">
        <label for="description">Description</label>
        <input type="text" name="description" id="description" />
      </div>

      <div class="col-md-6">
        <label for="product_type">Product Type</label>
        <input type="text" name="product_type" id="product_type" />
      </div>

      <div class="col-md-6">
        <label for="located">Located</label>
        <input type="text" name="located" id="located" />
      </div>

      <div class="col-md-6">
        <label for="Date_In">Date-In</label>
        <input type="date" name="Date_In" id="Date_In" max="" />
      </div>

      <div class="col-md-6">
        <label for="QTY_Vol">QTY Vol</label>
        <input type="number" name="QTY_Vol" id="QTY_Vol" step="any" />
      </div>

      <div class="col-md-4">
        <label for="Unit">Unit</label>
        <input type="text" name="Unit" id="Unit" required />
      </div>


      <div class="col-md-4">
        <label for="stock">Stock</label>
        <input type="number" step="0.01" name="stock" id="stock" required />
      </div>

      <div class="col-md-4">
        <label for="Qty_Per_Box">Qty Per Box</label>
        <input type="number" step="0.01" name="Qty_Per_Box" id="Qty_Per_Box" required />
      </div>

      <div class="col-md-4">
        <label for="Box_Available">Box Available</label>
        <input type="number" step="0.01" name="Box_Available" id="Box_Available" readonly />
      </div>

      <div class="col-md-4">
        <label for="Maximum_Storage_Days">Maximum Storage Days</label>
        <input type="number" step="0.01" name="Maximum_Storage_Days" id="Maximum_Storage_Days" required />
      </div>

      <!-- Nuevos campos agregados -->
      <div class="col-md-6">
        <label for="Due_Date">Due Date</label>
        <input type="date" name="Due_Date" id="Due_Date" />
      </div>

      <div class="col-md-6">
        <label for="Days_Available">Days Available</label>
        <input type="number" name="Days_Available" id="Days_Available" step="1" />
      </div>

      <div class="col-md-6">
        <label for="Status">Status</label>
        <input type="text" name="Status" id="Status"  readonly />
      </div>

      <div class="col-md-6">
        <label for="Note">Note</label>
        <input type="text" name="Note" id="Note" />
      </div>
    </div>

    <div class="btn-group">
      <a href="/inventario" class="btn-secondary">Cancelar</a>
      <button type="submit" class="btn-primary">Guardar producto</button>
    </div>
  </form>
</div>



<script>
  document.addEventListener("DOMContentLoaded", function () {
    const today = new Date().toISOString().split("T")[0];
    document.getElementById("Date_In").max = today;
    document.getElementById("Due_Date").min = today; // Por si quieres evitar fechas vencidas al agregar
  });
</script>

<!-- calculo de Box_Available -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const today = new Date().toISOString().split("T")[0];
    document.getElementById("Date_In").max = today;
    document.getElementById("Due_Date").min = today; // Evitar fechas vencidas

    const stockInput = document.getElementById("stock");
    const qtyPerBoxInput = document.getElementById("Qty_Per_Box");
    const boxAvailableInput = document.getElementById("Box_Available");

    function calcularBoxAvailable() {
      const stock = parseFloat(stockInput.value) || 0;
      const qtyPerBox = parseFloat(qtyPerBoxInput.value) || 0;
      
      if (qtyPerBox > 0) {
        boxAvailableInput.value = (stock / qtyPerBox).toFixed(2);
      } else {
        boxAvailableInput.value = "";
      }
    }

    stockInput.addEventListener("input", calcularBoxAvailable);
    qtyPerBoxInput.addEventListener("input", calcularBoxAvailable);
  });
</script>






<!-- calculo de days available y status-->
<script>
  const dateInInput = document.getElementById('Date_In');
  const dueDateInput = document.getElementById('Due_Date');
  const daysAvailableInput = document.getElementById('Days_Available');
  const statusInput = document.getElementById('Status');

  function calcularDiasYStatus() {
    const dateIn = new Date(dateInInput.value);
    const dueDate = new Date(dueDateInput.value);

    if (dateIn && dueDate && dueDate >= dateIn) {
      const diffTime = dueDate - dateIn;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      daysAvailableInput.value = diffDays;

      // Actualizar Status automáticamente
      statusInput.value = diffDays > 0 ? "Vigente" : "Expirado";
    } else {
      daysAvailableInput.value = "";
      statusInput.value = "";
    }
  }

  dateInInput.addEventListener('change', calcularDiasYStatus);
  dueDateInput.addEventListener('change', calcularDiasYStatus);
</script>


<!--warining in STATUS-->

<script>
  // Usamos la variable existente o creamos un scope local
  (function() {
    const statusField = document.getElementById('Status');
    statusField.addEventListener('click', function() {
      alert('El campo Status se actualiza automáticamente y no se puede editar.');
    });
  })();
</script>











</body>
</html>
